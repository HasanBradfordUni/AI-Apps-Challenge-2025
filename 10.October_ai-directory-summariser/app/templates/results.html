{% extends "base.html" %}

{% block title %}Has AI - Analysis Results{% endblock %}

{% block header_title %}Analysis Results{% endblock %}

{% block content %}
<h1 class="mainHeading">📊 Analysis Results</h1>
<h2 class="subHeading">{{ analysis.directory_path }}</h2>

<div class="dashboard-container">
    <!-- Overview -->
    <div class="dashboard-card">
        <h3 class="subHeading">📈 Overview</h3>
        <p><strong>Files:</strong> {{ analysis.total_files }}</p>
        <p><strong>Size:</strong> {{ (analysis.total_size / 1024 / 1024) | round(2) }} MB</p>
        <p><strong>File Types:</strong> {{ analysis.file_type_categories | length }}</p>
    </div>

    <!-- File Types -->
    <div class="dashboard-card">
        <h3 class="subHeading">📂 File Types</h3>
        {% for file_type, count in analysis.file_type_categories.items() %}
        <div class="event-item">
            <div class="event-details">
                <h4>{{ file_type.upper() }}</h4>
                <p>{{ count }} files</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Template Matches -->
    {% if template_matches %}
    <div class="dashboard-card">
        <h3 class="subHeading">🎯 Template Matches</h3>
        {% for match in template_matches %}
        <div class="event-item">
            <div class="event-details">
                <h4>{{ match.category }}</h4>
                <p>{{ match.match_count }} similar files found</p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- AI Insights -->
    {% if analysis.ai_insights %}
    <div class="dashboard-card">
        <h3 class="subHeading">🤖 AI Insights</h3>
        <div class="summary-content">{{ analysis.ai_insights }}</div>
    </div>
    {% endif %}

    <!-- Actions -->
    <div class="dashboard-card">
        <div class="quick-actions">
            <button onclick=`window.location.href='{{ url_for(main.dashboard) }}'` class="action-btn">🏠 Dashboard</button>
            <button onclick=`window.location.href='{{ url_for(main.export_analysis, format="json") }}'` class="action-btn">📄 Export</button>
        </div>
    </div>
</div>
{% endblock %}